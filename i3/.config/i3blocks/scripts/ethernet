#!/bin/bash

INTERFACE=${INTERFACE:-$(ip route | grep default | awk '{print $5}' | grep -E '^(eth|enp)' | head -n1)}

if [[ -z "$INTERFACE" ]]; then
	echo ""
	exit
fi

# Check if interface is up
if [[ "$(cat /sys/class/net/"$INTERFACE"/operstate 2>/dev/null)" != "up" ]]; then
	echo ""
	exit
fi

# Get IP address
IP=$(ip addr show "$INTERFACE" | grep "inet " | awk '{print $2}' | cut -d'/' -f1)

if [[ -n "$IP" ]]; then
	echo "$INTERFACE $IP"
	echo "$INTERFACE $IP"
	echo "#7dcfff"
else
	echo ""
fi
